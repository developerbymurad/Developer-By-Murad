<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Update Key.json on GitHub</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input, button { padding: 10px; font-size: 16px; }
    #status { margin-top: 10px; }
  </style>
</head>
<body>

  <h2>Update Key.json in GitHub Repo</h2>

  <input type="text" id="keyInput" placeholder="New Key ‡¶≤‡¶ø‡¶ñ‡ßã ‡¶è‡¶ñ‡¶æ‡¶®‡ßá">
  <button onclick="updateKey()">Enter</button>

  <p id="status"></p>

<script>
async function updateKey() {
  const newKey = document.getElementById("keyInput").value;
  if (!newKey) return alert("New Key ‡¶≤‡¶ø‡¶ñ‡ßã ‡¶Ü‡¶ó‡ßá");

  const OWNER = "developerbymurad";
  const REPO = "Developer-By-Murad";  
  const FILE_PATH = "Key.json";
  const TOKEN = "XXXXXXXXX"; // GitHub token

  const apiUrl = `https://api.github.com/repos/${OWNER}/${REPO}/contents/${FILE_PATH}`;

  // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá .json ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø GET ‡¶ï‡¶∞‡ßá SHA ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶≤‡¶æ‡¶ó‡ßá
  const getRes = await fetch(apiUrl, {
    headers: {
      "Authorization": "Bearer " + TOKEN,
      "Accept": "application/vnd.github.v3+json",
    }
  });
  const getData = await getRes.json();

  if (!getData.sha) {
    document.getElementById("status").innerText = "File ‡¶è‡¶∞ SHA ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø!";
    return;
  }

  // ‡¶®‡¶§‡ßÅ‡¶® JSON ‡¶ï‡¶®‡¶ü‡ßá‡¶®‡ßç‡¶ü
  const updatedJson = {
    key: newKey
  };

  const updateRes = await fetch(apiUrl, {
    method: "PUT",
    headers: {
      "Authorization": "Bearer " + TOKEN,
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      message: "Update key via Web UI",
      content: btoa(JSON.stringify(updatedJson, null, 2)),
      sha: getData.sha
    })
  });

  if (updateRes.ok) {
    document.getElementById("status").innerText = "Key.json ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá! üéâ";
  } else {
    document.getElementById("status").innerText = "Error: ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡ßü‡¶®‡¶ø!";
  }
}
</script>

</body>
</html>